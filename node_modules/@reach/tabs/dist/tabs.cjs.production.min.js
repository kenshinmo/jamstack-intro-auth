"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;require("prop-types"),require("warning");var r=require("@reach/descendants"),a=require("@reach/utils"),d=require("@reach/auto-id");function c(e,t){if(null==e)return{};var n,r,a={},d=Object.keys(e);for(r=0;r<d.length;r++)t.indexOf(n=d[r])>=0||(a[n]=e[n]);return a}var s=r.createDescendantContext("TabsDescendantsContext"),o=r.createDescendantContext("TabPanelDescendantsContext"),i=a.createNamedContext("TabsContext",{}),l=function(){return t.useContext(i)},u=a.forwardRefWithAs((function(e,o){var l,u=e.as,f=void 0===u?"div":u,b=e.children,v=e.defaultIndex,x=e.index,h=void 0===x?void 0:x,m=e.onChange,p=e.readOnly,I=void 0!==p&&p,D=c(e,["as","children","defaultIndex","index","onChange","readOnly"]),R=t.useRef(null!=h);t.useEffect((function(){}),[h]);var E=d.useId(D.id),w=null!==(l=D.id)&&void 0!==l?l:a.makeId("tabs",E),y=t.useRef(!1),C=t.useRef(null),k=t.useState(v||0),g=k[0],O=k[1],P=r.useDescendants(),S=P[0],T=P[1],j=t.useMemo((function(){return{isControlled:R.current,selectedIndex:R.current?h:g,id:w,userInteractedRef:y,selectedPanelRef:C,setSelectedIndex:R.current?a.noop:O,onFocusPanel:function(){var e;null===(e=C.current)||void 0===e||e.focus()},onSelectTab:I?a.noop:function(e){y.current=!0,m&&m(e),R.current||O(e)}}}),[h,w,m,I,g]);return t.useEffect((function(){return a.checkStyles("tabs")}),[]),n.createElement(r.DescendantProvider,{context:s,items:S,set:T},n.createElement(i.Provider,{value:j},n.createElement(f,Object.assign({},D,{ref:o,"data-reach-tabs":"",id:D.id}),b)))})),f=a.forwardRefWithAs((function(e,d){var o=e.children,i=e.as,u=void 0===i?"div":i,f=e.onKeyDown,b=c(e,["children","as","onKeyDown"]),v=l(),x=v.isControlled,h=v.onSelectTab,m=v.onFocusPanel,p=v.setSelectedIndex,I=v.selectedIndex,D=t.useContext(s).descendants,R=t.useRef(null),E=a.useForkedRef(d,R),w=t.useRef(!1);t.useEffect((function(){R.current&&(R.current.ownerDocument&&"rtl"===R.current.ownerDocument.dir||"rtl"===a.getElementComputedStyle(R.current,"direction"))&&(w.current=!0)}),[]);var y=a.wrapEvent((function(e){"ArrowDown"===e.key&&(e.preventDefault(),m())}),r.useDescendantKeyDown(s,{currentIndex:I,orientation:"horizontal",rotate:!0,callback:h,filter:function(e){return!e.disabled},rtl:w.current}));return a.useIsomorphicLayoutEffect((function(){var e;if(!x&&a.boolOrBoolString(null===(e=D[I])||void 0===e?void 0:e.disabled)){var t=D.find((function(e){return!e.disabled}));t&&p(t.index)}}),[D,x,I,p]),n.createElement(u,Object.assign({role:"tablist"},b,{"data-reach-tab-list":"",ref:E,onKeyDown:a.wrapEvent(f,y)}),t.Children.map(o,(function(e,t){return a.cloneValidElement(e,{isSelected:t===I})})))})),b=a.forwardRefWithAs((function(e,d){var o=e.children,i=e.as,u=void 0===i?"button":i,f=e.disabled,b=c(e,["children","isSelected","as","disabled"]),v=l(),x=v.id,h=v.onSelectTab,m=v.selectedIndex,p=v.userInteractedRef,I=t.useRef(null),D=a.useForkedRef(d,I),R=r.useDescendant({element:I.current,context:s,disabled:!!f}),E=R===m;return a.useUpdateEffect((function(){E&&I.current&&p.current&&(p.current=!1,I.current.focus())}),[E]),n.createElement(u,Object.assign({"aria-controls":a.makeId(x,"panel",R),"aria-disabled":f,"aria-selected":E,role:"tab",tabIndex:E?0:-1},b,{ref:D,"data-reach-tab":"","data-selected":E?"":void 0,disabled:f,id:a.makeId(x,"tab",R),onClick:function(){h(R)}}),o)})),v=a.forwardRefWithAs((function(e,t){var a=e.children,d=e.as,s=void 0===d?"div":d,i=c(e,["children","as"]),l=r.useDescendants();return n.createElement(r.DescendantProvider,{context:o,items:l[0],set:l[1]},n.createElement(s,Object.assign({},i,{ref:t,"data-reach-tab-panels":""}),a))})),x=a.forwardRefWithAs((function(e,d){var s=e.children,i=e.as,u=void 0===i?"div":i,f=c(e,["children","aria-label","as"]),b=l(),v=b.selectedPanelRef,x=b.selectedIndex,h=b.id,m=t.useRef(null),p=r.useDescendant({element:m.current,context:o}),I=p===x,D=a.makeId(h,"panel",p),R=a.useForkedRef(d,m,I?v:null);return n.createElement(u,Object.assign({"aria-labelledby":a.makeId(h,"tab",p),hidden:!I,role:"tabpanel",tabIndex:I?0:-1},f,{ref:R,"data-reach-tab-panel":"",id:D}),s)}));exports.Tab=b,exports.TabList=f,exports.TabPanel=x,exports.TabPanels=v,exports.Tabs=u;
//# sourceMappingURL=tabs.cjs.production.min.js.map
