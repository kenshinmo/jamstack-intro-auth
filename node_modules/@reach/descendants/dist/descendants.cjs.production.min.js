"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,r=require("@reach/utils");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}exports.DescendantProvider=function(e){var r=e.context,i=e.children,c=e.items,u=e.set,s=n.useCallback((function(e){var t=e.element,n=a(e,["element"]);t&&u((function(e){var r,a;if(0===e.length)r=o({element:t,index:0},n),a=[].concat(e,[r]);else if(e.find((function(e){return e.element===t})))a=e;else{var i=e.findIndex((function(e){return!(!e.element||!t)&&Boolean(e.element.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING)}));r=o({element:t,index:i},n),a=-1===i?[].concat(e,[r]):[].concat(e.slice(0,i),[r],e.slice(i))}return a.map((function(e,t){return o({},e,{index:t})}))}))}),[]),l=t.useCallback((function(e){e&&u((function(t){return t.filter((function(t){return e!==t.element}))}))}),[]),f=t.useMemo((function(){return{descendants:c,registerDescendant:s,unregisterDescendant:l}}),[c,s,l]);return n.createElement(r.Provider,{value:f},i)},exports.createDescendantContext=function(e,t){return void 0===t&&(t={}),r.createNamedContext(e,o({descendants:[],registerDescendant:r.noop,unregisterDescendant:r.noop},t))},exports.useDescendant=function(e,n){var i=e.context,c=e.element,u=a(e,["context","element"]),s=t.useState()[1],l=t.useContext(i),f=l.registerDescendant,d=l.unregisterDescendant,v=l.descendants;return r.useIsomorphicLayoutEffect((function(){return c||s({}),f(o({element:c},u)),function(){return d(c)}}),[c].concat(Object.values(u))),null!=n?n:v.findIndex((function(e){return e.element===c}))},exports.useDescendantKeyDown=function(e,n){var r=t.useContext(e).descendants,a=n.callback,i=n.currentIndex,c=n.filter,u=n.key,s=void 0===u?"index":u,l=n.orientation,f=void 0===l?"vertical":l,d=n.rotate,v=void 0===d||d,p=n.rtl,D=void 0!==p&&p,h=null!=i?i:-1;return function(e){if(["ArrowDown","ArrowUp","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(e.key)){var t=r;if(c){t=[];for(var n=-1,u=0;u<r.length;u++){var l=r[u];c(l)&&(t.push(o({},l,{index:n++})),h=u===i?n:h)}t=r.filter(c)}if(t.length)switch(e.key){case"ArrowDown":if("vertical"===f||"both"===f){e.preventDefault();var d=y();a("option"===s?d:d[s])}break;case"ArrowUp":if("vertical"===f||"both"===f){e.preventDefault();var p=P();a("option"===s?p:p[s])}break;case"ArrowLeft":if("horizontal"===f||"both"===f){e.preventDefault();var g=(D?y:P)();a("option"===s?g:g[s])}break;case"ArrowRight":if("horizontal"===f||"both"===f){e.preventDefault();var m=(D?P:y)();a("option"===s?m:m[s])}break;case"PageUp":e.preventDefault();var x=(e.ctrlKey?P:O)();a("option"===s?x:x[s]);break;case"Home":e.preventDefault();var b=O();a("option"===s?b:b[s]);break;case"PageDown":e.preventDefault();var w=(e.ctrlKey?y:A)();a("option"===s?w:w[s]);break;case"End":e.preventDefault();var k=A();a("option"===s?k:k[s])}}function y(){return h===t.length-1?v?O():t[h]:t[(h+1)%t.length]}function P(){return 0===h?v?A():t[h]:t[(h-1+t.length)%t.length]}function O(){return t[0]}function A(){return t[t.length-1]}}},exports.useDescendants=function(){return t.useState([])};
//# sourceMappingURL=descendants.cjs.production.min.js.map
